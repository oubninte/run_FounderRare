#! /bin/sh

#SBATCH --account=def-bureau
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=2
#SBATCH --mem-per-cpu=4G
#SBATCH --time=0-00:30

#SBATCH --output=/lustre03/project/6033529/genealogy_sims/results/Samir/Sims_power/Phenotype_sims_100reps/Slurm_files5/Extract_PairsOf2VrsInDffHaplo_%A.out
#SBATCH --mail-user=samir.oubninte.1@ulaval.ca
#SBATCH --mail-type=FAIL


# Objective:
# Run a SLURM job that loads Python, then extracts genotypes for pairs of two rare variants
# located in specified regions, ensuring the two variants are on different haplotypes, for a given chromosome/replicate,
# and save the outputs to the target directory.


#to run this script cmd  :
#for chrom in {22..1}; do for rep in 1 {11..20}; do sbatch --export=ALL,chrom=${chrom},rep=${rep} Extract_PairsOf2VrsInDffHaplo.sh ; done; done

module load python/3.10.2

echo "Exe date"
date +%D 
date +%T

#Get genotype of variant rare in CRG commun in SCZ
echo "Get genotype of variant rare in CaG/commun in SCZ every two are in different haplo"


N_region=1
chemin_RV="/lustre03/project/6033529/genealogy_sims/results/Samir/Sims_power/Phenotype_sims_100reps/Rare_variants/"
chemin_tsFile="/lustre03/project/6033529/genealogy_sims/results/Samir/Sims_data/"
chemin4save="/lustre03/project/6033529/genealogy_sims/results/Samir/Sims_power/Phenotype_sims_100reps/PairsOf2VrsInDffHaplo_genotype/"
mkdir -p "$chemin4save/"  

echo
echo " ---------------------------     chrom: $chrom rep : $rep N_region : $N_region   -------------------------------------------- "    
echo  
#python /lustre03/project/6033529/genealogy_sims/results/Samir/Sims_power/simulate_pheno/2Vrs_in2haplo_diff.py $chrom $rep $N_region $chemin_RV $chemin_tsFile $chemin_2save
python Extract_PairsOf2VrsInDffHaplo_chr.py $chrom $rep $N_region $chemin_RV $chemin_tsFile $chemin4save
